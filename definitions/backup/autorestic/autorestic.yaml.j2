# Filename: {{ output_path }}
# Borgmatic configuration for backing up {{ location_from }} to {{ backend_type }} backend
# Generated by Scaffoldr on {{ generation_timestamp }}

version: 2

locations:
  {{ location_name }}:
    from: {{ location_from }}
    to:
      - {{ location_to }}

    hooks:
      before:
        - echo "Starting '{{ location_name }}' backup."
{% if hook_before %}
        - "{{ hook_before }}"
{% endif %}
      success:
        - echo "Completed '{{ location_name }}' backup."
{% if hook_success %}
        - "{{ hook_success }}"
{% endif %}
      failure:
        - echo "Failed '{{ location_name }}' backup."
{% if hook_failure %}
        - "{{ hook_failure }}"
{% endif %}

backends:
  {{ backend_name }}:
    type: {{ backend_type }}
    path: {{ backend_path }}
{% if backend_type == 's3' %}
    env:
      AWS_ACCESS_KEY_ID: {{ backend_env_aws_access_key_id }}
      AWS_SECRET_ACCESS_KEY: {{ backend_env_aws_secret_access_key }}
{% endif %}
    key: {{ backend_key }}
    requireKey: true
