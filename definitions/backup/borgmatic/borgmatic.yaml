heading:
  title: "Scaffoldr - Borgmatic Configuration Wizard"
  before:
    - title: "Backup Source"
      subtitle: "Specify the source data and metadata for this backup set."
      prompts:
        - key: backup_name
          prompt: "Backup set name"
          description: "A unique name to identify this backup set (e.g., 'web-server-files')."
          required: true
        - key: source_directory
          prompt: "Source directory absolute path"
          description: "The full path to the directory you want to back up (e.g., /srv/www)."
          required: true
        - key: exclude_patterns
          prompt: "Exclude patterns"
          description: "Comma-separated patterns to exclude from the backup (optional)."
          is_list: true

    - title: "Backup Repository"
      subtitle: "Configure the location and access details for the backup repository."
      prompts:
        - key: repository_path
          prompt: "Repository URI"
          description: "The path or URI where backups will be stored (e.g., /mnt/backup or ssh://user@host/./repo)."
          required: true
        - key: remote_path
          prompt: "Remote Borg path"
          description: "Path to the borg executable on the remote server."
          default: "borg"
        - key: encryption_passphrase
          prompt: "Repository passphrase"
          description: "The passphrase used to encrypt the backup repository."
          is_password: true

    - title: "Storage & Archiving"
      subtitle: "Define naming conventions and archival settings."
      prompts:
        - key: archive_name_format
          prompt: "Archive name prefix"
          description: "Prefix for generated archive names."
          default: "{{ backup_name }}"

    - title: "Retention Policy"
      subtitle: "Define how many archives to keep for different time intervals."
      prompts:
        - key: retention_hourly
          prompt: "Keep hourly"
          description: "Number of hourly archives to retain (0 to disable)."
          default: '0'
        - key: retention_daily
          prompt: "Keep daily"
          description: "Number of daily archives to retain."
          default: '7'
        - key: retention_weekly
          prompt: "Keep weekly"
          description: "Number of weekly archives to retain."
          default: '4'
        - key: retention_monthly
          prompt: "Keep monthly"
          description: "Number of monthly archives to retain."
          default: '6'
        - key: retention_yearly
          prompt: "Keep yearly"
          description: "Number of yearly archives to retain."
          default: '1'

    - title: "Integrity Checks"
      subtitle: "Configure repository maintenance and consistency checks."
      prompts:
        - key: consistency_checks
          prompt: "Checks list"
          description: "Comma-separated list of checks (repository, archives, data)."
          default: "repository,archives"
          is_list: true
  after:
    logs:
      success: "Borgmatic configuration successfully generated at {output_path}"
      error: "Failed to generate configuration: {e}"
    notes:
      - "Action required: Initialize the Borg repository before running the first backup.\nExample: borg init {encryption_arg} --remote-path={remote_path} {repository_path}"
